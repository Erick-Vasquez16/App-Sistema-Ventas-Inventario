@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model InventarioVentas.Models.Producto;
<div class="row">
    <div class="col-sm-8 offset-2">
        <h2>Nuevo Producto</h2>
        <form id="nuevoProductoForm" asp-controller="Producto" asp-action="Nuevo" method="post">
            <div class="mb-3">
                <label>Nombre</label>
                <input class="form-control" asp-for="Nombre" type="text" />
            </div>
            <div class="mb-3">
                <label>Descripcion</label>
                <input class="form-control" asp-for="Descripcion" type="text" />
            </div>
            <div class="mb-3">
                <label>Marca</label>
                <input class="form-control" asp-for="Marca" type="text" />
            </div>
            
            <div class="mb-3">
                <label>Tipo de producto</label>
                <select class="form-control" asp-for="Tipo">
                    <option value=""> <strong> Seleccione una marca</strong></option>
                    <option value="Gorras">Gorras</option>
                    <option value="Accesorios">Accesorios</option>
                    <option value="Camisas">Camisas</option>
                    <option value="Cinchos">Cinchos</option>
                    <option value="Tacticos">Tacticos</option>
                </select>
            </div>
            
            <div class="mb-3">
                <button class="btn btn-primary" type="button" onclick="mostrarAlertaGuardar()">Guardar</button>
                <a asp-controller="Producto" asp-action="Lista" class="btn btn-warning" onclick="confirmarVolver(event)">Volver</a>

            </div>
        </form>
    </div>
</div>
<script>
    function mostrarAlertaGuardar() {
        Swal.fire({
            position: "center",
            icon: "success",
            title: "¡Tu producto ha sido guardado!",
            showConfirmButton: false,
            timer: 1500
        }).then(() => {
            // Enviar el formulario después de la alerta
            document.getElementById("nuevoProductoForm").submit(); // Envía el formulario manualmente
        });
    }

    function confirmarVolver(event) {
        event.preventDefault(); // Prevenir la redirección inmediata

        // Mostrar la alerta de confirmación
        Swal.fire({
            title: "¿Está seguro?",
            text: "¡Se perderán los datos ingresados!",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Sí, regresar!",
            cancelButtonText: "Cancelar"
        }).then((result) => {
            if (result.isConfirmed) {
                // Si el usuario confirma, redirigir a la página de lista de productos
                window.location.href = '@Url.Action("Lista", "Producto")';
            }
        });
    }
</script>